Hacking in a virtual test environment. Needs to be cleaned up
